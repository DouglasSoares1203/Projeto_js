!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.typestyle=t():e.typestyle=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){var t=new i.TypeStyle({autoGenerateTag:!1});return e&&t.setStylesTarget(e),t}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1);t.TypeStyle=i.TypeStyle;var o=n(6);t.types=o;var s=n(5);t.extend=s.extend,t.classes=s.classes,t.media=s.media;var a=new i.TypeStyle({autoGenerateTag:!0});t.setStylesTarget=a.setStylesTarget,t.cssRaw=a.cssRaw,t.cssRule=a.cssRule,t.forceRenderStyles=a.forceRenderStyles,t.fontFace=a.fontFace,t.getStyles=a.getStyles,t.keyframes=a.keyframes,t.reinit=a.reinit,t.style=a.style,t.createTypeStyle=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=n(5),o=n(3),s=function(){return o.create(void 0,!0)},a=function(){function e(e){var t=e.autoGenerateTag,n=this;this.cssRaw=function(e){e&&(n._raw+=e||"",n._pendingRawChange=!0,n._styleUpdated())},this.cssRule=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var s=r.ensureStringObj(i.extend.apply(void 0,t)).result;n._freeStyle.registerRule(e,s),n._styleUpdated()},this.forceRenderStyles=function(){var e=n._getTag();e&&(e.textContent=n.getStyles())},this.fontFace=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=n._freeStyle,i=0,o=e;i<o.length;i++){var s=o[i];r.registerRule("@font-face",s)}n._styleUpdated()},this.getStyles=function(){return(n._raw||"")+n._freeStyle.getStyles()},this.keyframes=function(e){var t=r.explodeKeyframes(e),i=t.keyframes,o=t.$debugName,s=n._freeStyle.registerKeyframes(i,o);return n._styleUpdated(),s},this.reinit=function(){var e=s();n._freeStyle=e,n._lastFreeStyleChangeId=e.changeId,n._raw="",n._pendingRawChange=!1;var t=n._getTag();t&&(t.textContent="")},this.setStylesTarget=function(e){n._tag&&(n._tag.textContent=""),n._tag=e,n.forceRenderStyles()},this.style=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=n._freeStyle,s=r.ensureStringObj(i.extend.apply(void 0,e)),a=s.result,u=s.debugName,h=u?o.registerStyle(a,u):o.registerStyle(a);return n._styleUpdated(),h};var o=s();this._autoGenerateTag=t,this._freeStyle=o,this._lastFreeStyleChangeId=o.changeId,this._pending=0,this._pendingRawChange=!1,this._raw="",this._tag=void 0}return e.prototype._afterAllSync=function(e){var t=this;this._pending++;var n=this._pending;i.raf(function(){n===t._pending&&e()})},e.prototype._getTag=function(){if(this._tag)return this._tag;if(this._autoGenerateTag){var e="undefined"==typeof window?{textContent:""}:document.createElement("style");return"undefined"!=typeof document&&document.head.appendChild(e),this._tag=e,e}},e.prototype._styleUpdated=function(){var e=this,t=this._freeStyle.changeId,n=this._lastFreeStyleChangeId;(this._pendingRawChange||t!==n)&&(this._lastFreeStyleChangeId=t,this._pendingRawChange=!1,this._afterAllSync(function(){return e.forceRenderStyles()}))},e}();t.TypeStyle=a},function(e,t,n){"use strict";function r(e){var t={},n="";for(var i in e){var s=e[i];if("$unique"===i)t[o.IS_UNIQUE]=s;else if("$nest"===i){var a=s;for(var u in a){var h=a[u];t[u]=r(h).result}}else"$debugName"===i?n=s:t[i]=s}return{result:t,debugName:n}}function i(e){var t={$debugName:void 0,keyframes:{}};for(var n in e){var r=e[n];"$debugName"===n?t.$debugName=r:t.keyframes[n]=r}return t}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.ensureStringObj=r,t.explodeKeyframes=i},function(e,t,n){(function(e){"use strict";function n(e){return e.replace(/([A-Z])/g,"-$1").replace(/^ms-/,"-ms-").toLowerCase()}function r(e){return"@"===e.charAt(0)}function i(e){return null!=e&&"object"==typeof e&&!Array.isArray(e)}function o(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString(36)}function s(e,t){return"number"!=typeof t||0===t||v[e]||(t+="px"),e+":"+String(t)}function a(e){return e.sort(function(e,t){return e[0]>t[0]?1:-1})}function u(e,r){for(var o=[],s=[],u=!1,h=0,c=Object.keys(e);h<c.length;h++){var f=c[h],l=e[f];f===t.IS_UNIQUE?u=!!l:i(l)?s.push([f.trim(),l]):o.push([n(f.trim()),l])}return{properties:a(o),nestedStyles:r?s:a(s),isUnique:u}}function h(e){for(var t=[],n=function(e,n){null!=n&&(Array.isArray(n)?n.forEach(function(n){n&&t.push(s(e,n))}):t.push(s(e,n)))},r=0,i=e;r<i.length;r++){var o=i[r],a=o[0],u=o[1];n(a,u)}return t.join(";")}function c(e,t){return e.indexOf("&")>-1?e.replace(/&/g,t):t+" "+e}function f(e,t,n,i,o){var s=u(n,!!t),a=s.properties,l=s.nestedStyles,d=s.isUnique,p=h(a),y=p;if(r(t)){var v=e.add(new O(t,o?void 0:p,e.hash));if(p&&o){var _=v.add(new k(p,v.hash,d?"u"+(++g).toString(36):void 0));i.push([o,_])}for(var m=0,S=l;m<S.length;m++){var w=S[m],x=w[0],b=w[1];y+=x+f(v,x,b,i,o)}}else{var T=o?c(t,o):t;if(p){var _=e.add(new k(p,e.hash,d?"u"+(++g).toString(36):void 0));i.push([T,_])}for(var I=0,j=l;I<j.length;I++){var R=j[I],x=R[0],b=R[1];y+=x+f(e,x,b,i,T)}}return y}function l(e,t,n,r,i){for(var o=new T(e.hash),s=[],a=f(o,t,n,s),u="f"+o.hash(a),h=i?i+"_"+u:u,l=0,d=s;l<d.length;l++){var p=d[l],y=p[0],g=p[1],v=r?c(y,"."+h):y;g.add(new I(v,g.hash,void 0,a))}return{cache:o,pid:a,id:h}}function d(e){return e.values().map(function(e){return e.getStyles()}).join("")}function p(t,n){return void 0===t&&(t=o),void 0===n&&(n="undefined"!=typeof e&&"production"!==e.env.NODE_ENV),new j(t,n)}var y=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var g=0;t.IS_UNIQUE="__DO_NOT_DEDUPE_STYLE__";for(var v={"animation-iteration-count":!0,"box-flex":!0,"box-flex-group":!0,"column-count":!0,"counter-increment":!0,"counter-reset":!0,flex:!0,"flex-grow":!0,"flex-positive":!0,"flex-shrink":!0,"flex-negative":!0,"font-weight":!0,"line-clamp":!0,"line-height":!0,opacity:!0,order:!0,orphans:!0,"tab-size":!0,widows:!0,"z-index":!0,zoom:!0,"fill-opacity":!0,"stroke-dashoffset":!0,"stroke-opacity":!0,"stroke-width":!0},_=0,m=["-webkit-","-ms-","-moz-","-o-"];_<m.length;_++)for(var S=m[_],w=0,x=Object.keys(v);w<x.length;w++){var b=x[w];v[S+b]=!0}t.stringHash=o;var T=function(){function e(e){this.hash=e,this.changeId=0,this._children={},this._keys=[],this._counters={}}return e.prototype.values=function(){var e=this;return this._keys.map(function(t){return e._children[t]})},e.prototype.add=function(t){var n=this._counters[t.id]||0,r=this._children[t.id]||t.clone();if(this._counters[t.id]=n+1,0===n)this._keys.push(r.id),this._children[r.id]=r,this.changeId++;else{if(r.getIdentifier()!==t.getIdentifier())throw new TypeError("Hash collision: "+t.getStyles()+" === "+r.getStyles());if(this._keys.splice(this._keys.indexOf(t.id),1),this._keys.push(t.id),r instanceof e&&t instanceof e){var i=r.changeId;r.merge(t),r.changeId!==i&&this.changeId++}}return r},e.prototype.remove=function(t){var n=this._counters[t.id];if(n>0){this._counters[t.id]=n-1;var r=this._children[t.id];if(1===n)delete this._counters[t.id],delete this._children[t.id],this._keys.splice(this._keys.indexOf(t.id),1),this.changeId++;else if(r instanceof e&&t instanceof e){var i=r.changeId;r.unmerge(t),r.changeId!==i&&this.changeId++}}},e.prototype.merge=function(e){for(var t=0,n=e.values();t<n.length;t++){var r=n[t];this.add(r)}return this},e.prototype.unmerge=function(e){for(var t=0,n=e.values();t<n.length;t++){var r=n[t];this.remove(r)}return this},e.prototype.clone=function(){return new e(this.hash).merge(this)},e}();t.Cache=T;var I=function(){function e(e,t,n,r){void 0===n&&(n="s"+t(e)),void 0===r&&(r=""),this.selector=e,this.hash=t,this.id=n,this.pid=r}return e.prototype.getStyles=function(){return this.selector},e.prototype.getIdentifier=function(){return this.pid+"."+this.selector},e.prototype.clone=function(){return new e(this.selector,this.hash,this.id,this.pid)},e}();t.Selector=I;var k=function(e){function t(t,n,r){void 0===r&&(r="c"+n(t));var i=e.call(this,n)||this;return i.style=t,i.hash=n,i.id=r,i}return y(t,e),t.prototype.getStyles=function(){return this.values().map(function(e){return e.getStyles()}).join(",")+"{"+this.style+"}"},t.prototype.getIdentifier=function(){return this.style},t.prototype.clone=function(){return new t(this.style,this.hash,this.id).merge(this)},t}(T);t.Style=k;var O=function(e){function t(t,n,r,i,o){void 0===n&&(n=""),void 0===i&&(i="a"+r(t+"."+n)),void 0===o&&(o="");var s=e.call(this,r)||this;return s.rule=t,s.style=n,s.hash=r,s.id=i,s.pid=o,s}return y(t,e),t.prototype.getStyles=function(){return this.rule+"{"+this.style+d(this)+"}"},t.prototype.getIdentifier=function(){return this.pid+"."+this.rule+"."+this.style},t.prototype.clone=function(){return new t(this.rule,this.style,this.hash,this.id,this.pid).merge(this)},t}(T);t.Rule=O;var j=function(e){function t(t,n,r){void 0===r&&(r="f"+(++g).toString(36));var i=e.call(this,t)||this;return i.hash=t,i.debug=n,i.id=r,i}return y(t,e),t.prototype.registerStyle=function(e,t){var n=l(this,"&",e,!0,this.debug?t:void 0),r=n.cache,i=n.id;return this.merge(r),i},t.prototype.registerKeyframes=function(e,t){return this.registerHashRule("@keyframes",e,t)},t.prototype.registerHashRule=function(e,t,n){var r=l(this,"",t,!1,this.debug?n:void 0),i=r.cache,o=r.pid,s=r.id,a=new O(e+" "+s,void 0,this.hash,void 0,o);return this.add(a.merge(i)),s},t.prototype.registerRule=function(e,t){this.merge(l(this,e,t,!1).cache)},t.prototype.registerCss=function(e){this.merge(l(this,"",e,!1).cache)},t.prototype.getStyles=function(){return d(this)},t.prototype.getIdentifier=function(){return this.id},t.prototype.clone=function(){return new t(this.hash,this.debug,this.id).merge(this)},t}(T);t.FreeStyle=j,t.create=p}).call(t,n(4))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function o(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function s(){y&&d&&(y=!1,d.length?p=d.concat(p):g=-1,p.length&&a())}function a(){if(!y){var e=i(s);y=!0;for(var t=p.length;t;){for(d=p,p=[];++g<t;)d&&d[g].run();g=-1,t=p.length}d=null,y=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function h(){}var c,f,l=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var d,p=[],y=!1,g=-1;l.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new u(e,t)),1!==p.length||y||i(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=h,l.addListener=h,l.once=h,l.off=h,l.removeListener=h,l.removeAllListeners=h,l.emit=h,l.binding=function(e){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(e){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(e,t){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(function(e){return!!e}).join(" ")}function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n={},i=0,o=e;i<o.length;i++){var s=o[i];if(null!=s&&s!==!1)for(var a in s){var u=s[a];(u||0===u)&&("$nest"===a&&u?n[a]=n.$nest?r(n.$nest,u):u:a.indexOf("&")!==-1||0===a.indexOf("@media")?n[a]=n[a]?r(n[a],u):u:n[a]=u)}}return n}Object.defineProperty(t,"__esModule",{value:!0}),t.raf="undefined"==typeof requestAnimationFrame?function(e){return setTimeout(e)}:requestAnimationFrame.bind(window),t.classes=n,t.extend=r,t.media=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=[];e.type&&o.push(e.type),e.orientation&&o.push(e.orientation),e.minWidth&&o.push("(min-width: "+i(e.minWidth)+")"),e.maxWidth&&o.push("(max-width: "+i(e.maxWidth)+")"),e.minHeight&&o.push("(min-height: "+i(e.minHeight)+")"),e.maxHeight&&o.push("(max-height: "+i(e.maxHeight)+")");var s="@media "+o.join(" and "),a={$nest:(u={},u[s]=r.apply(void 0,t),u)};return a;var u};var i=function(e){return"string"==typeof e?e:e+"px"}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})}])});